(this["webpackJsonpdemo-react"]=this["webpackJsonpdemo-react"]||[]).push([[0],{24:function(e,t,a){},38:function(e,t,a){e.exports=a(58)},43:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(14),i=a.n(s),o=(a(43),a(20)),l=a(9),c=a.n(l),m=a(19),u=a(12),p=a(13),h=a(17),d=a(16),b=a(18),f=(a(45),a(24),a(33)),v=a.n(f),g=a(11),y=a(23),w=a(15),O=a(21);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var D=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleShow=a.handleShow.bind(Object(g.a)(a)),a.handleClose=a.handleClose.bind(Object(g.a)(a)),a.handleChange=a.handleChange.bind(Object(g.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(g.a)(a)),a.state={show:!0,username:"",password:""},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleChange",value:function(e){var t=e.target;this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,Object(o.a)({},t.name,t.value)))}},{key:"handleSubmit",value:function(){var e=Object(m.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.onLogin(this.state.username,this.state.password);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"primary",onClick:this.handleShow},"Get Started"),r.a.createElement(O.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Login with Thermoworks Account")),r.a.createElement(O.a.Body,null,r.a.createElement(w.a,null,r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Email address"),r.a.createElement(w.a.Control,{name:"username",type:"email",value:this.state.username,placeholder:"Enter email",onChange:this.handleChange}),r.a.createElement(w.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(w.a.Group,{controlId:"formBasicPassword"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{name:"password",type:"password",value:this.state.password,placeholder:"Password",onChange:this.handleChange})),r.a.createElement(y.a,{variant:"primary",onClick:this.handleSubmit},"Submit"))),r.a.createElement(O.a.Footer,null,r.a.createElement(y.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(y.a,{variant:"primary",onClick:this.handleClose},"Save Changes"))))}}]),t}(n.Component),j=(a(29),a(35)),S=(a(51),a(54),function(){function e(){Object(u.a)(this,e),this.fbInstance=void 0,this.username=void 0,this.password=void 0,this.uid=void 0,this.smokeDevices=void 0,this.tempData=void 0,this.probeState=void 0,this.onDataUpdate=void 0,this.fbInstance=j.initializeApp({apiKey:"AIzaSyCfCUKlG5-VPsqta-9M92XBSFLHYsbSqLk",authDomain:"smoke-cloud.firebaseapp.com",databaseURL:"https://smoke-cloud.firebaseio.com",projectId:"smoke-cloud",storageBucket:"smoke-cloud.appspot.com",messagingSenderId:"74663406178"}),this.username="",this.password="",this.uid="",this.smokeDevices=new Map,this.tempData=new Map,this.onDataUpdate=void 0,this.probeState=new Map}return Object(p.a)(e,[{key:"setCredentials",value:function(e,t){this.username=e,this.password=t}},{key:"init",value:function(){var e=Object(m.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.uid="",this.smokeDevices=new Map,e.next=4,this.fbInstance.auth().signInWithEmailAndPassword(this.username,this.password).catch((function(e){var t=e.code,a=e.message;"auth/wrong-password"===t?alert("Wrong password."):alert(a),console.log(e)}));case 4:return this.uid=this.fbInstance.auth().currentUser.uid,e.next=7,this.fbInstance.database().ref().child("users").child(this.uid).child("devices").child("signals").once("value");case 7:e.sent.forEach((function(e){var a=e.toJSON();t.smokeDevices.set(a.deviceName,a),t.tempData.set(a.deviceName+":"+a.probe1Name,[]),t.tempData.set(a.deviceName+":"+a.probe2Name,[]),t.tempData.set(a.deviceName+":"+a.probe3Name,[]),t.tempData.set(a.deviceName+":"+a.probe4Name,[]),t.start(a)}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSignalsDevices",value:function(){return this.smokeDevices}},{key:"returnTempData",value:function(){return this.tempData}},{key:"returnProbeDetails",value:function(){return this.probeState}},{key:"setOnTempUpdate",value:function(e){this.onDataUpdate=e}},{key:"start",value:function(e){var t=this;this.fbInstance.database().ref().child("SignalTemps").child(e.deviceID).limitToLast(100).on("value",(function(a){return t.addTempData(e.deviceName,a)}))}},{key:"replaceProbeDetails",value:function(){var e=Object(m.a)(c.a.mark((function e(t){var a,n,r,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.smokeDevices.get(t),n="",void 0!==a&&(n=a.deviceID),e.next=5,this.fbInstance.database().ref().child("signals").child(n).limitToLast(20).once("value");case 5:r=e.sent,s=r.toJSON(),void 0!==(i=this.tempData.get(t+":"+s.names.p1))&&void 0!==i[i.length-1]&&this.probeState.set(t+":"+s.names.p1,{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarmSounding.p1H)||Boolean(s.alarmSounding.p1L),alarmHigh:s.alarms.p1H,alarmLow:s.alarms.p1L,max:s.maxmin.p1Max,min:s.maxmin.p1Min,name:s.names.p1}),void 0!==(i=this.tempData.get(t+":"+s.names.p2))&&void 0!==i[i.length-1]&&this.probeState.set(t+":"+s.names.p2,{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarmSounding.p2H)||Boolean(s.alarmSounding.p2L),alarmHigh:s.alarms.p2H,alarmLow:s.alarms.p2L,max:s.maxmin.p2Max,min:s.maxmin.p2Min,name:s.names.p2}),void 0!==(i=this.tempData.get(t+":"+s.names.p3))&&void 0!==i[i.length-1]&&this.probeState.set(t+":"+s.names.p3,{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarmSounding.p3H)||Boolean(s.alarmSounding.p3L),alarmHigh:s.alarms.p3H,alarmLow:s.alarms.p3L,max:s.maxmin.p3Max,min:s.maxmin.p3Min,name:s.names.p3}),void 0!==(i=this.tempData.get(t+":"+s.names.p4))&&void 0!==i[i.length-1]&&this.probeState.set(t+":"+s.names.p4,{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarmSounding.p4H)||Boolean(s.alarmSounding.p4L),alarmHigh:s.alarms.p4H,alarmLow:s.alarms.p4L,max:s.maxmin.p4Max,min:s.maxmin.p4Min,name:s.names.p4});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addTempData",value:function(){var e=Object(m.a)(c.a.mark((function e(t,a){var n,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.smokeDevices.get(t),a.forEach((function(e){var t=e.toJSON(),a=new Date(0);a.setUTCSeconds(Number(t.time)),void 0!==n&&("---"!==t.p1&&r.tempData.get(n.deviceName+":"+n.probe1Name).push({date:a,value:Number(t.p1)}),"---"!==t.p2&&r.tempData.get(n.deviceName+":"+n.probe2Name).push({date:a,value:Number(t.p2)}),"---"!==t.p3&&r.tempData.get(n.deviceName+":"+n.probe3Name).push({date:a,value:Number(t.p3)}),"---"!==t.p4&&r.tempData.get(n.deviceName+":"+n.probe4Name).push({date:a,value:Number(t.p4)}))})),e.next=4,this.replaceProbeDetails(t);case 4:void 0!==this.onDataUpdate&&this.onDataUpdate();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),k=(a(56),a(37)),x=a(8),P=a(10),N=a(36),C=a(25);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={probe:e.probe,name:e.name,background:"light",text:"white"},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=Number(this.state.probe.temp),a=Number(this.state.probe.alarmHigh),n=Number(this.state.probe.alarmLow),r="light",s="secondary";n<t&&t<a&&(r="light",s="secondary"),n>t&&(r="primary",s="white"),t>a&&(r="danger",s="white"),this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{background:r,text:s}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{className:"m-2",bg:this.state.background,style:{flex:1},text:this.state.text},r.a.createElement(C.a.Title,null,this.state.name),r.a.createElement(C.a.Body,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(x.a,{style:{fontSize:"xx-small"}},"MinAlarm"),r.a.createElement(x.a,null,this.state.probe.alarmLow))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(x.a,{style:{fontSize:"xx-small"}},"MaxAlarm"),r.a.createElement(x.a,null,this.state.probe.alarmHigh)))),r.a.createElement(P.a,null,r.a.createElement(x.a,{style:{fontSize:"xxx-large",writingMode:"vertical-lr"}},this.state.probe.temp,"\xb0")),r.a.createElement(P.a,null,r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(x.a,{style:{fontSize:"xx-small"}},"Min"),r.a.createElement(x.a,null,this.state.probe.min))),r.a.createElement(x.a,null,r.a.createElement(P.a,null,r.a.createElement(x.a,{style:{fontSize:"xx-small"}},"Max"),r.a.createElement(x.a,null,this.state.probe.max))))))))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={curTemps:e.curTemps,probeDetails:e.probeDetails},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({curTemps:e.curTemps,probeDetails:e.probeDetails})}},{key:"render",value:function(){var e=[];return this.state.probeDetails.forEach((function(t,a){return e.push(r.a.createElement(L,{name:a,probe:t}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{style:{display:"flex",flexDirection:"column"}},e))}}]),t}(n.Component);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var H=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={firebase:new S,tempData:[],curTemps:new Map,probeDetails:new Map},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"onLogin",value:function(){var e=Object(m.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.firebase.setCredentials(t,a),this.state.firebase.setOnTempUpdate(this.onTempUpdate.bind(this)),e.next=4,this.state.firebase.init();case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onTempUpdate",value:function(){var e=new Map;this.state.firebase.returnTempData().forEach((function(t,a){e.set(a,t[t.length-1])}));var t=[];this.state.firebase.returnTempData().forEach((function(e){t.push(e)}));var a=this.state.firebase.returnProbeDetails();this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,{tempData:t,curTemps:e,probeDetails:a}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(k.a,{fluid:!0},r.a.createElement(x.a,null,r.a.createElement(P.a,{md:"10"},r.a.createElement(v.a,{title:"Temperature over Time",description:"This graphic shows a time-series of temperature.",data:this.state.tempData,full_width:"true",height:600,x_accessor:"date",y_accessor:"value",right:"40",area:"false",brush:"xy"})),r.a.createElement(P.a,{md:"2"},r.a.createElement(M,{curTemps:this.state.curTemps,probeDetails:this.state.probeDetails})))),r.a.createElement(D,{onLogin:this.onLogin.bind(this)})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.d1332a98.chunk.js.map