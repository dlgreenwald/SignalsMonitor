{"version":3,"sources":["LoginModal.tsx","ThermoworksFirebase.tsx","TempDisplay.tsx","TempColumn.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["LoginModal","props","handleShow","bind","handleClose","handleChange","handleSubmit","state","show","username","password","this","setState","event","target","name","value","onLogin","preventDefault","Button","variant","onClick","Modal","Form","onSubmit","Header","Title","Body","Group","controlId","Label","Control","type","placeholder","onChange","Text","className","Footer","Component","ThermoworksFirebase","fbInstance","uid","smokeDevices","tempData","probeState","onDataUpdate","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","Map","undefined","auth","signInWithEmailAndPassword","catch","error","errorCode","code","errorMessage","message","alert","console","log","currentUser","database","ref","child","once","forEach","device","devObj","toJSON","set","deviceName","probe1Name","probe2Name","probe3Name","probe4Name","start","deviceID","limitToLast","on","snapshot_","addTempData","get","details","deviceDetails","temp","names","p1","length","toString","date","alarm","Boolean","alarmSounding","p1H","p1L","alarmHigh","alarms","alarmLow","max","maxmin","p1Max","min","p1Min","p2","p2H","p2L","p2Max","p2Min","p3","p3H","p3L","p3Max","p3Min","p4","p4H","p4L","p4Max","p4Min","a","record","data","d","Date","setUTCSeconds","Number","time","push","replaceProbeDetails","TempDisplay","probe","background","text","nextProps","newBackground","newText","Card","bg","style","flex","Row","Col","fontSize","writingMode","TempColumn","curTemps","probeDetails","TempElements","key","CardDeck","display","flexDirection","App","setCredentials","setOnTempUpdate","onTempUpdate","init","newCurTemps","returnTempData","newTemps","newProbeDetails","returnProbeDetails","Container","fluid","md","title","full_width","height","x_accessor","y_accessor","right","area","brush","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2c5ce471.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Button from 'react-bootstrap/Button'\nimport Form from 'react-bootstrap/Form'\nimport Modal from 'react-bootstrap/Modal'\n\n\n\n\ninterface MyProps {\n  onLogin:(username:string, password:string) => any;\n};\ninterface MyState {\n  show: boolean\n  username: string\n  password: string\n};\n\nclass LoginModal extends Component<MyProps, MyState> {\n\n  constructor(props:MyProps) {\n\t\tsuper(props);\n\n\t\tthis.handleShow = this.handleShow.bind(this);\n\t\tthis.handleClose = this.handleClose.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n\n\t\tthis.state = {\n\t\t\tshow: true,\n      username: '',\n      password: ''\n\t\t};\n  }\n\n  handleClose() {\n\t\tthis.setState({...this.state, show: false });\n\t}\n\n\thandleShow() {\n\t\tthis.setState({...this.state, show: true });\n\t}\n\n  handleChange(event: React.FormEvent) {\n    let target = (event.target as HTMLInputElement);\n    this.setState({...this.state, [target.name]: target.value});\n  }\n\n  handleSubmit(event:React.FormEvent<HTMLFormElement>) {\n    this.props.onLogin(this.state.username, this.state.password);\n    this.setState({...this.state, show: false });\n    event.preventDefault();\n  }\n\n  render() {\n    return (\n      <>\n      <Button variant=\"primary\" onClick={this.handleShow}>\n        Get Started\n      </Button>\n      <Modal show={this.state.show}>\n      <Form onSubmit={this.handleSubmit}>\n        <Modal.Header>\n          <Modal.Title>Login with Thermoworks Account</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form.Group controlId=\"formBasicEmail\">\n            <Form.Label>Email address</Form.Label>\n            <Form.Control name=\"username\" type=\"email\" value={this.state.username} placeholder=\"Enter email\" onChange={this.handleChange}/>\n            <Form.Text className=\"text-muted\">\n              We'll never share your email with anyone else.\n            </Form.Text>\n          </Form.Group>\n\n          <Form.Group controlId=\"formBasicPassword\">\n            <Form.Label>Password</Form.Label>\n            <Form.Control name=\"password\" type=\"password\" value={this.state.password} placeholder=\"Password\" onChange={this.handleChange}/>\n          </Form.Group>\n\n        </Modal.Body>\n        <Modal.Footer>\n\n          <Button type=\"submit\" variant=\"primary\">\n            Login\n          </Button>\n        </Modal.Footer>\n        </Form>\n      </Modal>\n      </>\n    );\n  }\n\n}\n\nexport default LoginModal;","import * as firebase from 'firebase/app';\nimport \"firebase/database\";\nimport \"firebase/auth\";\n\ninterface ISignalsDevice {\n  deviceID:string;\n  dateAdded:string;\n  deviceName:string;\n  fan:string;\n  probe1Name:string;\n  probe2Name:string;\n  probe3Name:string;\n  probe4Name:string;\n  wifiOnly:string;\n}\n\ninterface ITempRecord{\n  p1:string,\n  p2:string,\n  p3:string,\n  p4:string,\n  time:string\n}\n\ninterface ISignalsDeviceDetails{\n  alarmSounding:{p1H:string, p1L:string, p2H:string, p2L:string, p3H:string, p3L:string, p4H:string, p4L:string},\n  alarmSwitch:{p1Switch:string, p2Switch:string, p3Switch:string, p4Switch:string},\n  alarms:{p1H:string, p1L:string, p2H:string, p2L:string, p3H:string, p3L:string, p4H:string, p4L:string},\n  calibration:{p1:string, p2:string, p3:string, p4:string},\n  data:{battery:string, firmware:string, wifi:string},\n  fan:{alarm:string, connection:string, setTemp:string},\n  maxmin:{p1Max:string, p1Min:string, p2Max:string, p2Min:string, p3Max:string, p3Min:string, p4Max:string, p4Min:string},\n  migrated:boolean,\n  muted: {p1:string, p2:string, p3:string, p4:string},\n  names: {device:string, p1:string, p2:string, p3:string, p4:string},\n  resetmaxmin:{p1:string, p2:string, p3:string, p4:string},\n  rings:{p1:string, p2:string, p3:string, p4:string},\n  rssi:{lastupdate:string, level:string},\n  tempunit:{unit:string}\n}\n\nexport class ThermoworksFirebase {\n  fbInstance: firebase.app.App;\n  username: string;\n  password: string;\n  uid: string;\n  smokeDevices: Map<String, ISignalsDevice>;\n  tempData:Map<string, Array<{ 'date': Date; 'value': number; }>>;\n  probeState:Map<string, { \"temp\":string, \"date\":Date, \"alarm\":boolean, \"alarmHigh\":string, \"alarmLow\":string, \"max\":string, \"min\":string, \"name\":string}>;\n  onDataUpdate?:() => any;\n\n  constructor() {\n    //these were mined from the android APK... hopefully they don't mind too much\n    this.fbInstance = firebase.initializeApp({\n      apiKey: 'AIzaSyCfCUKlG5-VPsqta-9M92XBSFLHYsbSqLk',\n      authDomain: 'smoke-cloud.firebaseapp.com',\n      databaseURL: 'https://smoke-cloud.firebaseio.com',\n      projectId: 'smoke-cloud',\n      storageBucket: 'smoke-cloud.appspot.com',\n      messagingSenderId: '74663406178'\n    });\n\n    this.username = '';\n    this.password = '';\n    this.uid = '';\n    this.smokeDevices = new Map();\n    this.tempData = new Map();\n    this.onDataUpdate = undefined;\n    this.probeState = new Map();\n  }\n\n  setCredentials(username:string, password:string){\n    this.username = username;\n    this.password = password;\n  }\n\n  async init(){\n    this.uid = '';\n    this.smokeDevices = new Map();\n    await this.fbInstance.auth().signInWithEmailAndPassword(this.username, this.password).catch(function(error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      if (errorCode === 'auth/wrong-password') {\n        alert('Wrong password.');\n      } else {\n        alert(errorMessage);\n      }\n      console.log(error);\n    });\n    this.uid = this.fbInstance.auth().currentUser!.uid;\n\n    //we have to wait for this to come back once to finish init, but we also need to subscribe to changes.\n    var devicesQuery = await this.fbInstance.database().ref().child(\"users\").child(this.uid).child(\"devices\").child(\"signals\").once(\"value\");\n    \n    devicesQuery.forEach((device) => {\n      var devObj = device.toJSON() as ISignalsDevice;\n\n      this.smokeDevices.set(devObj.deviceName,devObj);\n      //init empty temp data\n      this.tempData.set(devObj.deviceName+\":\"+devObj.probe1Name, [])\n      this.tempData.set(devObj.deviceName+\":\"+devObj.probe2Name, [])\n      this.tempData.set(devObj.deviceName+\":\"+devObj.probe3Name, [])\n      this.tempData.set(devObj.deviceName+\":\"+devObj.probe4Name, [])\n\n      //subscribe to update events on each device\n      this.start(devObj);\n    });\n\n  }\n\n  //Gets the Signals Devices.  Smoke Devices are at \"users/[uid]/devices/smoke\" but I don't have one so I can't make this reliable.  Only need to do this at login\n  getSignalsDevices(){\n    return this.smokeDevices;\n  }\n\n  returnTempData(): Map<string, Array<{ 'date': Date; 'value': number; }>>{\n    return this.tempData;\n  }\n\n \n  returnProbeDetails(): Map<string, { \"temp\":string, \"date\":Date, \"alarm\":boolean, \"alarmHigh\":string, \"alarmLow\":string, \"max\":string, \"min\":string, \"name\":string}>{\n    return this.probeState; \n  }\n\n  setOnTempUpdate(onDataUpdate:() => any){\n    this.onDataUpdate = onDataUpdate;\n  }\n\n\n  start(device: ISignalsDevice){\n    this.fbInstance.database().ref().child(\"SignalTemps\").child(device.deviceID).limitToLast(100).on(\"value\", (snapshot_ => this.addTempData(device.deviceName, snapshot_)));\n  }\n\n  async replaceProbeDetails(deviceName:string){\n    //lets do the conversion here rather than when requested.\n    var device = this.smokeDevices.get(deviceName);\n    var deviceID:string = \"\";\n    if(device!==undefined){\n      deviceID=device.deviceID;\n    }\n\n    var details = await this.fbInstance.database().ref().child(\"signals\").child(deviceID).limitToLast(20).once(\"value\");\n    var deviceDetails:ISignalsDeviceDetails = details.toJSON() as ISignalsDeviceDetails\n    \n    //It pains me to write code like this, but it's unavoidable with the way the data is stuctured.\n    //The best thing we can do is restructure the data as soon as we have it.\n    //P1\n    var temp = this.tempData.get(deviceName+\":\"+deviceDetails.names.p1)\n    if(temp !== undefined && temp[temp.length-1]!==undefined){\n      this.probeState.set(deviceName+\":\"+deviceDetails.names.p1, {\n        temp:temp[temp.length-1].value.toString(),\n        date:temp[temp.length-1].date,\n        alarm:Boolean(deviceDetails.alarmSounding.p1H)||Boolean(deviceDetails.alarmSounding.p1L),\n        alarmHigh:deviceDetails.alarms.p1H,\n        alarmLow:deviceDetails.alarms.p1L,\n        max:deviceDetails.maxmin.p1Max,\n        min:deviceDetails.maxmin.p1Min,\n        name:deviceDetails.names.p1\n      });\n    }\n\n    //P2\n    temp = this.tempData.get(deviceName+\":\"+deviceDetails.names.p2)\n    if(temp !== undefined && temp[temp.length-1]!==undefined){\n      this.probeState.set(deviceName+\":\"+deviceDetails.names.p2, {\n        temp:temp[temp.length-1].value.toString(),\n        date:temp[temp.length-1].date,\n        alarm:Boolean(deviceDetails.alarmSounding.p2H)||Boolean(deviceDetails.alarmSounding.p2L),\n        alarmHigh:deviceDetails.alarms.p2H,\n        alarmLow:deviceDetails.alarms.p2L,\n        max:deviceDetails.maxmin.p2Max,\n        min:deviceDetails.maxmin.p2Min,\n        name:deviceDetails.names.p2\n      });\n    }\n\n    //P3\n    temp = this.tempData.get(deviceName+\":\"+deviceDetails.names.p3)\n    if(temp !== undefined && temp[temp.length-1]!==undefined){\n      this.probeState.set(deviceName+\":\"+deviceDetails.names.p3, {\n        temp:temp[temp.length-1].value.toString(),\n        date:temp[temp.length-1].date,\n        alarm:Boolean(deviceDetails.alarmSounding.p3H)||Boolean(deviceDetails.alarmSounding.p3L),\n        alarmHigh:deviceDetails.alarms.p3H,\n        alarmLow:deviceDetails.alarms.p3L,\n        max:deviceDetails.maxmin.p3Max,\n        min:deviceDetails.maxmin.p3Min,\n        name:deviceDetails.names.p3\n      });\n    }\n\n    //P4\n    temp = this.tempData.get(deviceName+\":\"+deviceDetails.names.p4)\n    if(temp !== undefined && temp[temp.length-1]!==undefined){\n      this.probeState.set(deviceName+\":\"+deviceDetails.names.p4, {\n        temp:temp[temp.length-1].value.toString(),\n        date:temp[temp.length-1].date,\n        alarm:Boolean(deviceDetails.alarmSounding.p4H)||Boolean(deviceDetails.alarmSounding.p4L),\n        alarmHigh:deviceDetails.alarms.p4H,\n        alarmLow:deviceDetails.alarms.p4L,\n        max:deviceDetails.maxmin.p4Max,\n        min:deviceDetails.maxmin.p4Min,\n        name:deviceDetails.names.p4\n      });\n    }\n  }\n  \n  async addTempData(deviceName:string, a:firebase.database.DataSnapshot){\n    var device = this.smokeDevices.get(deviceName);\n\n    a.forEach((record:firebase.database.DataSnapshot) => {\n      var data = record.toJSON() as ITempRecord;\n\n      var d = new Date(0);\n      d.setUTCSeconds(Number(data.time));\n\n      if(device !== undefined){\n        data.p1!==\"---\"&&this.tempData.get(device.deviceName+\":\"+device.probe1Name)!.push({date:d, value:Number(data.p1)});\n        data.p2!==\"---\"&&this.tempData.get(device.deviceName+\":\"+device.probe2Name)!.push({date:d, value:Number(data.p2)});\n        data.p3!==\"---\"&&this.tempData.get(device.deviceName+\":\"+device.probe3Name)!.push({date:d, value:Number(data.p3)});\n        data.p4!==\"---\"&&this.tempData.get(device.deviceName+\":\"+device.probe4Name)!.push({date:d, value:Number(data.p4)});\n  \n      }\n    });\n\n    await this.replaceProbeDetails(deviceName);\n\n    if(this.onDataUpdate!==undefined){\n      this.onDataUpdate();\n    }\n\n  }\n\n}\n\n","import React, { Component } from 'react';\nimport './App.css';\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Card from 'react-bootstrap/Card'\nimport {CardProps} from 'react-bootstrap/Card'\n\n\ninterface MyProps {name: string, probe:{ \"temp\":string, \"date\":Date, \"alarm\":boolean, \"alarmHigh\":string, \"alarmLow\":string, \"max\":string, \"min\":string, \"name\":string}};\ninterface MyState {\n    name: string, \n    background:CardProps[\"bg\"],\n    text:CardProps[\"text\"],\n    probe:{ \"temp\":string, \"date\":Date, \"alarm\":boolean, \"alarmHigh\":string, \"alarmLow\":string, \"max\":string, \"min\":string, \"name\":string}};\n  \n  class TempDisplay extends Component<MyProps, MyState> {\n    constructor(props:MyProps){\n        super(props);\n\n        this.state = {\n            probe:props.probe,\n            name:props.name,\n            background:\"light\",\n            text:\"secondary\"\n        }\n    }\n\n    componentWillReceiveProps(nextProps:MyProps) {\n        var temp:Number = Number(this.state.probe.temp);\n        var alarmHigh:Number = Number(this.state.probe.alarmHigh);\n        var alarmLow:Number = Number(this.state.probe.alarmLow);\n\n        var newBackground:CardProps[\"bg\"] = 'light';\n        var newText:CardProps[\"text\"] = \"secondary\";\n        if((alarmLow < temp) && (temp < alarmHigh)){\n            newBackground = 'light';\n            newText = 'secondary';\n        }\n        if((alarmLow > temp)){\n            newBackground = \"primary\";\n            newText = 'white';\n        }\n        if((temp > alarmHigh)){\n            newBackground = \"danger\";\n            newText=\"white\";\n        }\n\n        this.setState({...nextProps, background:newBackground, text:newText});  \n      }\n\n\n    render() {\n        return(\n            <>\n            <Card className=\"m-2\" bg={this.state.background} style={{flex: 1}} text={this.state.text}>\n                <Card.Title>{this.state.name}</Card.Title>\n                <Card.Body>\n                    <Row>\n                        <Col>\n                            <Row><Col><Row style={{fontSize:\"xx-small\"}}>MinAlarm</Row><Row>{this.state.probe.alarmLow}</Row></Col></Row>\n                            <Row><Col><Row style={{fontSize:\"xx-small\"}}>MaxAlarm</Row><Row>{this.state.probe.alarmHigh}</Row></Col></Row>\n                        </Col>\n                        <Col>\n                            <Row style={{fontSize:\"xxx-large\", writingMode:\"vertical-lr\"}}>{this.state.probe.temp}Â°</Row>\n                        </Col>\n                        <Col>\n                            <Row><Col><Row style={{fontSize:\"xx-small\"}}>Min</Row><Row>{this.state.probe.min}</Row></Col></Row>\n                            <Row><Col><Row style={{fontSize:\"xx-small\"}}>Max</Row><Row>{this.state.probe.max}</Row></Col></Row>\n                        </Col>\n                    </Row>\n                </Card.Body>\n            </Card>\n            </>\n        )\n    }\n\n  }\n\n  export default TempDisplay;\n\n","import React, { Component } from 'react';\nimport './App.css';\nimport CardDeck from 'react-bootstrap/CardDeck'\nimport TempDisplay from './TempDisplay'\n\n\n\ninterface MyProps {\n    //Remove me\n    curTemps:Map<string, { 'date': Date; 'value': Number; }>,\n    probeDetails:Map<string, { \"temp\":string, \"date\":Date, \"alarm\":boolean, \"alarmHigh\":string, \"alarmLow\":string, \"max\":string, \"min\":string, \"name\":string}>;\n};\ninterface MyState {\n    curTemps:Map<string, { 'date': Date; 'value': Number; }>,\n    probeDetails:Map<string, { \"temp\":string, \"date\":Date, \"alarm\":boolean, \"alarmHigh\":string, \"alarmLow\":string, \"max\":string, \"min\":string, \"name\":string}>;\n};\n  \n  class TempColumn extends Component<MyProps, MyState> {\n    constructor(props:MyProps){\n        super(props);\n\n        this.state =  {\n            curTemps:props.curTemps,\n            probeDetails:props.probeDetails\n        }\n    }\n\n    componentWillReceiveProps(nextProps:MyProps) {\n        this.setState({ curTemps: nextProps.curTemps, probeDetails:nextProps.probeDetails  });  \n      }\n\n\n\n    render() {\n        var TempElements:Array<any> = [];\n        this.state.probeDetails.forEach((device, key) => \n            TempElements.push(<TempDisplay name={key} probe={device}/>)\n            \n            \n            )\n        return(\n            <>\n            <CardDeck  style={{display:\"flex\", flexDirection:\"column\"}}>\n                {TempElements}\n            </CardDeck>\n            </>\n        )\n    }\n\n  }\n\n  export default TempColumn;","import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport MetricsGraphics from 'react-metrics-graphics';\nimport LoginModal from './LoginModal';\nimport {ThermoworksFirebase} from './ThermoworksFirebase';\nimport 'jquery';\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport TempColumn from './TempColumn';\nimport './mggraphics.css'\n\ninterface MyProps {\n\n};\ninterface MyState {\n  firebase: ThermoworksFirebase\n  tempData:Array<Array<{ 'date': Date; 'value': number; }>>;\n  curTemps:Map<string, { 'date': Date; 'value': number; }>;\n  probeDetails:Map<string, { \"temp\":string, \"date\":Date, \"alarm\":boolean, \"alarmHigh\":string, \"alarmLow\":string, \"max\":string, \"min\":string, \"name\":string}>;\n};\nclass App extends Component<{}, MyState> {\n  constructor(state:MyProps){\n    super(state);\n\n    this.state = {\n      firebase: new ThermoworksFirebase(),\n      tempData:  [],\n      curTemps: new Map(),\n      probeDetails: new Map()\n    };\n  }\n\n\n  async onLogin(username:string, password:string){\n    this.state.firebase.setCredentials(username, password);\n    this.state.firebase.setOnTempUpdate(this.onTempUpdate.bind(this));\n    await this.state.firebase.init();\n  }\n\n  onTempUpdate(){\n    //Store most recent data as Map for display\n    var newCurTemps:Map<string, { 'date': Date; 'value': number; }> = new Map();\n    this.state.firebase.returnTempData().forEach((probe, key)=>{\n      newCurTemps.set(key, probe[probe.length-1]);\n    })\n\n    //Store all data as Array of Arrays for graph\n    var newTemps:Array<Array<{ 'date': Date; 'value': number; }>>=[];\n    this.state.firebase.returnTempData().forEach((probe)=>{\n      newTemps.push(probe);\n    })\n\n    var newProbeDetails = this.state.firebase.returnProbeDetails();\n\n    this.setState({...this.state, \n      tempData:newTemps, curTemps:newCurTemps, probeDetails:newProbeDetails\n    });\n  }\n\n  \n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <Container fluid >\n          <Row>\n            <Col md=\"10\">          \n              <MetricsGraphics\n                title=\"Temperature over Time\"\n                data={ this.state.tempData }\n                full_width=\"true\"\n                height={600}\n                x_accessor=\"date\"\n                y_accessor=\"value\"\n                right=\"40\"\n                area=\"false\"\n                brush=\"xy\"\n              />\n            </Col>\n            <Col md=\"2\">\n                <TempColumn curTemps={this.state.curTemps} probeDetails={this.state.probeDetails}/>\n            </Col>\n          </Row>\n          </Container>\n\n          <LoginModal onLogin={this.onLogin.bind(this)}/>\n\n        </header>\n      </div>\n    );\n  }\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}