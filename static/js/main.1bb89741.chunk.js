(this["webpackJsonpdemo-react"]=this["webpackJsonpdemo-react"]||[]).push([[0],{25:function(e,t,a){},40:function(e,t){},45:function(e,t,a){e.exports=a.p+"static/media/beeps.927d19ee.mp3"},50:function(e,t,a){e.exports=a(92)},55:function(e,t,a){},72:function(e,t,a){},89:function(e,t){},90:function(e,t){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),s=a.n(i),o=(a(55),a(8)),l=a.n(o),c=a(21),m=a(15),p=a(12),u=a(13),h=a(18),d=a(17),b=a(19),g=(a(57),a(25),a(41)),v=a.n(g),f=a(10),w=a(24),y=a(16),S=a(22),O=a(26),D=a.n(O),E=a(43);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleShow=a.handleShow.bind(Object(f.a)(a)),a.handleClose=a.handleClose.bind(Object(f.a)(a)),a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.state={show:e.show,username:"",password:"",loginSubmitted:!1},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(k({},this.state,{show:e.show}))}},{key:"handleClose",value:function(){this.setState(k({},this.state,{show:!1}))}},{key:"handleShow",value:function(){this.setState(k({},this.state,{show:!0,loginSubmitted:!1}))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(k({},this.state,Object(c.a)({},t.name,t.value)))}},{key:"handleSubmit",value:function(e){this.props.onLogin(this.state.username,this.state.password),this.setState(k({},this.state,{loginSubmitted:!0})),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{style:{width:"250px",margin:"15px"},variant:"primary",onClick:this.handleShow},"Get Started"),r.a.createElement(S.a,{show:this.state.show},r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(S.a.Header,null,r.a.createElement(S.a.Title,null,"Login with Thermoworks Account"),r.a.createElement(D.a,{href:"https://github.com/dlgreenwald/SignalsMontior",direction:"right",size:"60",octoColor:"white",bannerColor:"grey"})),r.a.createElement(S.a.Body,null,r.a.createElement(y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(y.a.Label,null,"Email address"),r.a.createElement(y.a.Control,{name:"username",type:"email",value:this.state.username,placeholder:"Enter email",onChange:this.handleChange}),r.a.createElement(y.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(y.a.Group,{controlId:"formBasicPassword"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{name:"password",type:"password",value:this.state.password,placeholder:"Password",onChange:this.handleChange}))),r.a.createElement(S.a.Footer,null,r.a.createElement(w.a,{type:"submit",variant:"primary",disabled:this.state.loginSubmitted},"Login ",this.state.loginSubmitted&&r.a.createElement(E.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))))))}}]),t}(n.Component),N=a(44),P=(a(65),a(67),function(){function e(){Object(p.a)(this,e),this.fbInstance=void 0,this.username=void 0,this.password=void 0,this.uid=void 0,this.signalDevices=void 0,this.smokeDevices=void 0,this.tempData=void 0,this.probeState=void 0,this.onDataUpdate=void 0,this.fbInstance=N.initializeApp({apiKey:"AIzaSyCfCUKlG5-VPsqta-9M92XBSFLHYsbSqLk",authDomain:"smoke-cloud.firebaseapp.com",databaseURL:"https://smoke-cloud.firebaseio.com",projectId:"smoke-cloud",storageBucket:"smoke-cloud.appspot.com",messagingSenderId:"74663406178"}),this.username="",this.password="",this.uid="",this.signalDevices=new Map,this.smokeDevices=new Map,this.tempData=new Map,this.onDataUpdate=void 0,this.probeState=new Map}return Object(u.a)(e,[{key:"setCredentials",value:function(e,t){this.username=e,this.password=t}},{key:"init",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.uid="",this.signalDevices=new Map,e.next=4,this.fbInstance.auth().signInWithEmailAndPassword(this.username,this.password).catch((function(e){var t=e.code,a=e.message;"auth/wrong-password"===t?alert("Wrong password."):alert(a),console.log(e)}));case 4:return this.uid=this.fbInstance.auth().currentUser.uid,e.next=7,this.fbInstance.database().ref().child("users").child(this.uid).child("devices").child("signals").once("value");case 7:return e.sent.forEach((function(e){var a=e.toJSON();t.signalDevices.set(a.deviceName,a),t.tempData.set(a.deviceName+":"+a.probe1Name,[]),t.tempData.set(a.deviceName+":"+a.probe2Name,[]),t.tempData.set(a.deviceName+":"+a.probe3Name,[]),t.tempData.set(a.deviceName+":"+a.probe4Name,[]),t.signalsStart(a)})),e.next=11,this.fbInstance.database().ref().child("users").child(this.uid).child("devices").child("smoke").once("value");case 11:e.sent.forEach((function(e){var a=e.toJSON();t.smokeDevices.set(a.name,a),t.tempData.set(a.name+":Probe 1",[]),t.tempData.set(a.name+":Probe 2",[]),t.smokeStart(a)}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"returnTempData",value:function(){return this.tempData}},{key:"returnProbeDetails",value:function(){return this.probeState}},{key:"setOnTempUpdate",value:function(e){this.onDataUpdate=e}},{key:"signalsStart",value:function(e){var t=this;this.fbInstance.database().ref().child("SignalTemps").child(e.deviceID).limitToLast(100).on("value",(function(a){return t.addSignalsTempData(e.deviceName,a)}))}},{key:"smokeStart",value:function(e){var t=this;this.fbInstance.database().ref().child("smokeTemp").child(e.device).limitToLast(100).on("value",(function(a){return t.addSmokeTempData(e.name,a)}))}},{key:"replaceSignalsProbeDetails",value:function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n,r,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.signalDevices.get(t),n="",void 0!==a&&(n=a.deviceID),e.next=5,this.fbInstance.database().ref().child("signals").child(n).limitToLast(20).once("value");case 5:r=e.sent,i=r.toJSON(),void 0!==(s=this.tempData.get(t+":"+i.names.p1))&&void 0!==s[s.length-1]&&this.probeState.set(t+":"+i.names.p1,{temp:s[s.length-1].value.toString(),date:s[s.length-1].date,alarm:Boolean(i.alarmSounding.p1H)||Boolean(i.alarmSounding.p1L),alarmHigh:i.alarms.p1H,alarmLow:i.alarms.p1L,max:i.maxmin.p1Max,min:i.maxmin.p1Min,name:i.names.p1}),void 0!==(s=this.tempData.get(t+":"+i.names.p2))&&void 0!==s[s.length-1]&&this.probeState.set(t+":"+i.names.p2,{temp:s[s.length-1].value.toString(),date:s[s.length-1].date,alarm:Boolean(i.alarmSounding.p2H)||Boolean(i.alarmSounding.p2L),alarmHigh:i.alarms.p2H,alarmLow:i.alarms.p2L,max:i.maxmin.p2Max,min:i.maxmin.p2Min,name:i.names.p2}),void 0!==(s=this.tempData.get(t+":"+i.names.p3))&&void 0!==s[s.length-1]&&this.probeState.set(t+":"+i.names.p3,{temp:s[s.length-1].value.toString(),date:s[s.length-1].date,alarm:Boolean(i.alarmSounding.p3H)||Boolean(i.alarmSounding.p3L),alarmHigh:i.alarms.p3H,alarmLow:i.alarms.p3L,max:i.maxmin.p3Max,min:i.maxmin.p3Min,name:i.names.p3}),void 0!==(s=this.tempData.get(t+":"+i.names.p4))&&void 0!==s[s.length-1]&&this.probeState.set(t+":"+i.names.p4,{temp:s[s.length-1].value.toString(),date:s[s.length-1].date,alarm:Boolean(i.alarmSounding.p4H)||Boolean(i.alarmSounding.p4L),alarmHigh:i.alarms.p4H,alarmLow:i.alarms.p4L,max:i.maxmin.p4Max,min:i.maxmin.p4Min,name:i.names.p4});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addSignalsTempData",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.signalDevices.get(t),a.forEach((function(e){var t=e.toJSON(),a=new Date(0);a.setUTCSeconds(Number(t.time)),void 0!==n&&("---"!==t.p1&&r.tempData.get(n.deviceName+":"+n.probe1Name).push({date:a,value:Number(t.p1)}),"---"!==t.p2&&r.tempData.get(n.deviceName+":"+n.probe2Name).push({date:a,value:Number(t.p2)}),"---"!==t.p3&&r.tempData.get(n.deviceName+":"+n.probe3Name).push({date:a,value:Number(t.p3)}),"---"!==t.p4&&r.tempData.get(n.deviceName+":"+n.probe4Name).push({date:a,value:Number(t.p4)}))})),e.next=4,this.replaceSignalsProbeDetails(t);case 4:void 0!==this.onDataUpdate&&this.onDataUpdate();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"replaceSmokeProbeDetails",value:function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n,r,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.smokeDevices.get(t),n="",void 0!==a&&(n=a.device),e.next=5,this.fbInstance.database().ref().child("smoke").child(n).limitToLast(20).once("value");case 5:r=e.sent,i=r.toJSON(),void 0!==(s=this.tempData.get(t+":Probe 1"))&&void 0!==s[s.length-1]&&this.probeState.set(t+":Probe 1",{temp:s[s.length-1].value.toString(),date:s[s.length-1].date,alarm:Boolean(i.alarms.alarm1High)||Boolean(i.alarms.alarm1Low),alarmHigh:i.alarms.probe1H,alarmLow:i.alarms.probe1L,max:i.minMax.probe1Max,min:i.minMax.probe1Min,name:t}),void 0!==(s=this.tempData.get(t+":Probe 2"))&&void 0!==s[s.length-1]&&this.probeState.set(t+":Probe 2",{temp:s[s.length-1].value.toString(),date:s[s.length-1].date,alarm:Boolean(i.alarms.alarm2High)||Boolean(i.alarms.alarm2Low),alarmHigh:i.alarms.probe2H,alarmLow:i.alarms.probe2L,max:i.minMax.probe2Max,min:i.minMax.probe2Min,name:t});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addSmokeTempData",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.smokeDevices.get(t),a.forEach((function(e){var t=e.toJSON(),a=new Date(0);a.setUTCSeconds(Number(t.time)),void 0!==n&&("-"!==t.probe1&&r.tempData.get(n.name+":Probe 1").push({date:a,value:Number(t.probe1)}),"-"!==t.probe2&&r.tempData.get(n.name+":Probe 2").push({date:a,value:Number(t.probe2)}))})),e.next=4,this.replaceSmokeProbeDetails(t);case 4:void 0!==this.onDataUpdate&&this.onDataUpdate();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),L=(a(69),a(47)),T=a(9),C=a(14),M=a(29),H=a(46),B=a(27),I=a.n(B),U=a(45),z=a.n(U);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var W=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={isAlarming:!1,probe:e.probe,name:e.name,background:"light",text:"secondary"},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=Number(this.state.probe.temp),a=Number(this.state.probe.alarmHigh),n=Number(this.state.probe.alarmLow),r="light",i="secondary",s=!1;n<t&&t<a&&(r="light",i="secondary"),n>t&&(r="primary",i="white",s=!0),t>a&&(r="danger",i="white",s=!0),this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,{name:e.name,probe:e.probe,background:r,text:i,isAlarming:s}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row cardContainer"},r.a.createElement(M.a,{className:"col card",style:{cursor:"pointer"},text:this.state.text,bg:this.state.background,border:"dark"},r.a.createElement(M.a.Title,{style:{textAlign:"center"}},this.state.name),r.a.createElement(M.a.Body,{style:{padding:0}},r.a.createElement(H.a,{fluid:!0},r.a.createElement(T.a,{style:{padding:0}},r.a.createElement(C.a,{xs:"4",style:{padding:0}},r.a.createElement(T.a,{style:{padding:0}},r.a.createElement(C.a,null,r.a.createElement(T.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"MinAlarm"),r.a.createElement(T.a,{style:{fontSize:"large",padding:0,margin:0}},this.state.probe.alarmLow))),r.a.createElement(T.a,{style:{padding:0}},r.a.createElement(C.a,null,r.a.createElement(T.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"MaxAlarm"),r.a.createElement(T.a,{style:{fontSize:"large",padding:0,margin:0}},this.state.probe.alarmHigh)))),r.a.createElement(C.a,{xs:"4",style:{padding:0}},r.a.createElement(T.a,{style:{fontSize:"xxx-large",writingMode:"vertical-lr",padding:0}},this.state.probe.temp,"\xb0")),r.a.createElement(C.a,{xs:"4",style:{padding:0}},r.a.createElement(T.a,{style:{padding:0}},r.a.createElement(C.a,null,r.a.createElement(T.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"Min"),r.a.createElement(T.a,{style:{fontSize:"large",padding:0,margin:0}},this.state.probe.min))),r.a.createElement(T.a,{style:{padding:0}},r.a.createElement(C.a,null,r.a.createElement(T.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"Max"),r.a.createElement(T.a,{style:{fontSize:"large",padding:0,margin:0}},this.state.probe.max)))))),r.a.createElement(I.a,{url:z.a,playStatus:this.state.isAlarming?I.a.status.PLAYING:I.a.status.STOPPED,loop:!0})))))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={curTemps:e.curTemps,probeDetails:e.probeDetails},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({curTemps:e.curTemps,probeDetails:e.probeDetails})}},{key:"render",value:function(){var e=[];return this.state.probeDetails.forEach((function(t,a){return e.push(r.a.createElement(W,{name:a,probe:t}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"cardDeckContainer",className:"row"},r.a.createElement(L.a,{id:"cardDeck",className:"col"},e)))}}]),t}(n.Component),F=(a(72),a(48)),G=a.n(F),X=a(49),_=a(28);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={firebase:new P,tempData:[],baselines:[],curTemps:new Map,probeDetails:new Map,showLogin:!0},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"onLogin",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.firebase.setCredentials(t,a),this.state.firebase.setOnTempUpdate(this.onTempUpdate.bind(this)),e.next=4,this.state.firebase.init();case 4:this.setState(q({},this.state,{showLogin:!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onTempUpdate",value:function(){var e=new Map;this.state.firebase.returnTempData().forEach((function(t,a){e.set(a,t[t.length-1])}));var t=[];this.state.firebase.returnTempData().forEach((function(e){0!==e.length&&t.push(e)}));var a=this.state.firebase.returnProbeDetails(),n=[];this.state.firebase.returnProbeDetails().forEach((function(e,t){n.push({value:Number(e.alarmHigh),label:t+" High"}),"32"!==e.alarmLow&&n.push({value:Number(e.alarmLow),label:t+" Low"})})),this.setState(q({},this.state,{tempData:t,curTemps:e,probeDetails:a,baselines:n}))}},{key:"exportXLSX",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx",(t=_.utils.book_new()).Props={Title:"ThermoWorks Temperature Log"},this.state.firebase.returnTempData().forEach((function(e,a){if(0!==e.length){var n=a.replace(":","-");t.SheetNames.push(n),t.Sheets[n]=_.utils.json_to_sheet(e)}})),a=_.write(t,{bookType:"xlsx",type:"array"}),n=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),X.saveAs(n,"Temps.xlsx");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"App",style:{padding:0,margin:0},className:"row"},r.a.createElement("div",{id:"container",className:"col"},r.a.createElement(D.a,{href:"https://github.com/dlgreenwald/SignalsMontior",direction:"left",octoColor:"#212529",bannerColor:"grey"}),r.a.createElement("div",{id:"headerContainer",className:"row"},r.a.createElement("div",{id:"header"},"Better Thermoworks Monitor")),r.a.createElement("div",{id:"body",className:"row"},r.a.createElement("div",{id:"irbe"},r.a.createElement("div",{id:"graphContainer",className:"row"},r.a.createElement(G.a,null,(function(t){var a=t.width;t.height;return r.a.createElement(v.a,{data:e.state.tempData,width:a,height:600,x_accessor:"date",y_accessor:"value",right:"40",area:"false",brush:"xy",baselines:e.state.baselines})}))),r.a.createElement(J,{curTemps:this.state.curTemps,probeDetails:this.state.probeDetails}))),r.a.createElement("div",{id:"buttonContainer",className:"col"},r.a.createElement(j,{show:this.state.showLogin,onLogin:this.onLogin.bind(this)}),r.a.createElement(w.a,{style:{width:"250px",margin:"15px"},onClick:this.exportXLSX.bind(this)},"Download *.xlsx")),r.a.createElement("div",{id:"footer",className:"row"},r.a.createElement("div",{id:"footerContainer",className:"col"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.1bb89741.chunk.js.map