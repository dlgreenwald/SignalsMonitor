(this["webpackJsonpsignals-monitor"]=this["webpackJsonpsignals-monitor"]||[]).push([[0],{109:function(e,t){},110:function(e,t){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),s=a.n(i),o=(a(78),a(10)),l=a.n(o),c=a(15),m=a(25),h=a(13),p=a(14),d=a(18),u=a(17),b=a(19),g=(a(45),a(29),a(32)),v=a.n(g),f=a(7),y=a(23),w=a(8),O=a(12),S=a(30),D=a.n(S),E=a(64);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleShow=a.handleShow.bind(Object(f.a)(a)),a.handleClose=a.handleClose.bind(Object(f.a)(a)),a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.state={username:"",password:"",loginSubmitted:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleClose",value:function(){this.setState(j({},this.state))}},{key:"handleShow",value:function(){this.setState(j({},this.state,{loginSubmitted:!1}))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(j({},this.state,Object(c.a)({},t.name,t.value)))}},{key:"handleSubmit",value:function(e){this.props.onLogin(this.state.username,this.state.password),this.setState(j({},this.state,{loginSubmitted:!0})),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{style:{width:"250px",margin:"15px"},variant:"primary",onClick:this.handleShow},"Get Started"),r.a.createElement(O.a,{show:this.props.show},r.a.createElement(w.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Header,null,r.a.createElement(O.a.Title,null,"Login with Thermoworks Account"),r.a.createElement(D.a,{href:"https://github.com/dlgreenwald/SignalsMontior",direction:"right",size:"60",octoColor:"white",bannerColor:"grey"})),r.a.createElement(O.a.Body,null,r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Email address"),r.a.createElement(w.a.Control,{name:"username",type:"email",value:this.state.username,placeholder:"Enter email",onChange:this.handleChange}),r.a.createElement(w.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(w.a.Group,{controlId:"formBasicPassword"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{name:"password",type:"password",value:this.state.password,placeholder:"Password",onChange:this.handleChange}))),r.a.createElement(O.a.Footer,null,r.a.createElement(y.a,{type:"submit",variant:"primary",disabled:this.state.loginSubmitted},"Login ",this.state.loginSubmitted&&r.a.createElement(E.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))))))}}]),t}(n.Component);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var N=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleShow=a.handleShow.bind(Object(f.a)(a)),a.handleClose=a.handleClose.bind(Object(f.a)(a)),a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.state={show:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleClose",value:function(){this.setState(C({},this.state,{show:!1}))}},{key:"handleShow",value:function(){this.props.onShare(),this.setState(C({},this.state,{show:!0}))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(C({},this.state,Object(c.a)({},t.name,t.value)))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{style:{width:"250px",margin:"15px"},variant:"primary",onClick:this.handleShow},"Share Graph"),r.a.createElement(O.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Share Graph")),r.a.createElement(O.a.Body,null,r.a.createElement(w.a,null,r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"URL"),r.a.createElement(w.a.Control,{name:"URL",type:"email",value:this.props.url,disabled:!0}),r.a.createElement(w.a.Text,{className:"text-muted"},"Share this URL to share the current graph.  The link will be good for 150 days.")))),r.a.createElement(O.a.Footer,null,r.a.createElement(y.a,{variant:"primary",onClick:this.handleClose},"Close"))))}}]),t}(n.Component);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function L(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleShow=a.handleShow.bind(Object(f.a)(a)),a.handleClose=a.handleClose.bind(Object(f.a)(a)),a.handleChange=a.handleChange.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.state={textEntered:!1,annotationText:""},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleClose",value:function(){this.props.onClose()}},{key:"handleShow",value:function(){}},{key:"handleChange",value:function(e){var t=e.target,a=L({},this.state,Object(c.a)({},t.name,t.value));""!==a.annotationText&&(a=L({},a,{textEntered:!0})),this.setState(a)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSave(this.props.date,this.state.annotationText)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{show:this.props.show,onHide:this.handleClose},r.a.createElement(w.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Header,null,r.a.createElement(O.a.Title,null,"Annotation")),r.a.createElement(O.a.Body,null,r.a.createElement(w.a.Group,{controlId:"annotationText"},r.a.createElement(w.a.Label,null,"Annotation Text"),r.a.createElement(w.a.Control,{name:"annotationText",value:this.state.annotationText,placeholder:"Please enter text",onChange:this.handleChange}))),r.a.createElement(O.a.Footer,null,r.a.createElement(y.a,{variant:"primary",onClick:this.handleClose},"Close"),r.a.createElement(y.a,{type:"submit",variant:"primary",disabled:!this.state.textEntered},"Save")))))}}]),t}(n.Component),B=a(65),H=(a(87),a(89),function(){function e(){Object(h.a)(this,e),this.fbInstance=void 0,this.username=void 0,this.password=void 0,this.uid=void 0,this.signalDevices=void 0,this.smokeDevices=void 0,this.tempData=void 0,this.probeState=void 0,this.signalsDeviceDetails=void 0,this.smokeDeviceDetails=void 0,this.onDataUpdate=void 0,this.fbInstance=B.initializeApp({apiKey:"AIzaSyCfCUKlG5-VPsqta-9M92XBSFLHYsbSqLk",authDomain:"smoke-cloud.firebaseapp.com",databaseURL:"https://smoke-cloud.firebaseio.com",projectId:"smoke-cloud",storageBucket:"smoke-cloud.appspot.com",messagingSenderId:"74663406178"}),this.username="",this.password="",this.uid="",this.signalDevices=new Map,this.smokeDevices=new Map,this.tempData=new Map,this.onDataUpdate=void 0,this.probeState=new Map,this.signalsDeviceDetails=new Map,this.smokeDeviceDetails=new Map}return Object(p.a)(e,[{key:"setCredentials",value:function(e,t){this.username=e,this.password=t}},{key:"init",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t,a,n,r,i,s,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.uid="",this.signalDevices=new Map,e.next=4,this.fbInstance.auth().signInWithEmailAndPassword(this.username,this.password).catch((function(e){var t=e.code,a=e.message;"auth/wrong-password"===t?alert("Wrong password."):alert(a),console.log(e)}));case 4:return this.uid=this.fbInstance.auth().currentUser.uid,e.next=7,this.fbInstance.database().ref().child("users").child(this.uid).child("devices").child("signals").once("value");case 7:t=e.sent,e.t0=l.a.keys(t.toJSON());case 9:if((e.t1=e.t0()).done){e.next=25;break}return a=e.t1.value,console.log(t.val()[a]),n=t.val()[a],this.signalDevices.set(n.deviceName,n),this.tempData.set(n.deviceName+":"+n.probe1Name,[]),this.tempData.set(n.deviceName+":"+n.probe2Name,[]),this.tempData.set(n.deviceName+":"+n.probe3Name,[]),this.tempData.set(n.deviceName+":"+n.probe4Name,[]),e.next=20,this.fbInstance.database().ref().child("SignalTemps").child(n.deviceID).limitToLast(300).once("value");case 20:r=e.sent,this.addSignalsTempData(n.deviceName,r),this.signalsStart(n),e.next=9;break;case 25:return e.next=27,this.fbInstance.database().ref().child("users").child(this.uid).child("devices").child("smoke").once("value");case 27:i=e.sent,e.t2=l.a.keys(i.toJSON());case 29:if((e.t3=e.t2()).done){e.next=43;break}return s=e.t3.value,console.log(i.val()[s]),o=i.val()[s],this.smokeDevices.set(o.name,o),this.tempData.set(o.name+":Probe 1",[]),this.tempData.set(o.name+":Probe 2",[]),e.next=38,this.fbInstance.database().ref().child("smokeTemp").child(o.device).limitToLast(300).once("value");case 38:c=e.sent,this.addSignalsTempData(o.name,c),this.smokeStart(o),e.next=29;break;case 43:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"returnTempData",value:function(){return this.tempData}},{key:"returnProbeDetails",value:function(){return this.probeState}},{key:"setOnTempUpdate",value:function(e){this.onDataUpdate=e}},{key:"signalsStart",value:function(e){var t=this;this.fbInstance.database().ref().child("SignalTemps").child(e.deviceID).limitToLast(1).on("value",(function(a){return t.addSignalsTempData(e.deviceName,a)})),this.fbInstance.database().ref().child("signals").child(e.deviceID).limitToLast(20).on("value",(function(a){return t.addSignalsData(e.deviceName,a)}))}},{key:"smokeStart",value:function(e){var t=this;this.fbInstance.database().ref().child("smokeTemp").child(e.device).limitToLast(1).on("value",(function(a){return t.addSmokeTempData(e.name,a)})),this.fbInstance.database().ref().child("smoke").child(e.device).limitToLast(20).on("value",(function(a){return t.addSmokeData(e.name,a)}))}},{key:"addSignalsData",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Signals Device ("+t+") Data update"),n=a.toJSON(),this.signalsDeviceDetails.set(t,n),this.replaceSignalsProbeDetails(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addSmokeData",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Smoke Device ("+t+") Data update"),n=a.toJSON(),this.smokeDeviceDetails.set(t,n),this.replaceSmokeProbeDetails(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"replaceSignalsProbeDetails",value:function(e){var t=this.signalsDeviceDetails.get(e);if(void 0!==t){var a=this.tempData.get(e+":"+t.names.p1);void 0!==a&&void 0!==a[a.length-1]&&this.probeState.set(e+":"+t.names.p1,{temp:a[a.length-1].value.toString(),date:a[a.length-1].date,alarm:Boolean(t.alarmSounding.p1H)||Boolean(t.alarmSounding.p1L),alarmHigh:t.alarms.p1H,alarmLow:t.alarms.p1L,max:t.maxmin.p1Max,min:t.maxmin.p1Min,name:t.names.p1}),void 0!==(a=this.tempData.get(e+":"+t.names.p2))&&void 0!==a[a.length-1]&&this.probeState.set(e+":"+t.names.p2,{temp:a[a.length-1].value.toString(),date:a[a.length-1].date,alarm:Boolean(t.alarmSounding.p2H)||Boolean(t.alarmSounding.p2L),alarmHigh:t.alarms.p2H,alarmLow:t.alarms.p2L,max:t.maxmin.p2Max,min:t.maxmin.p2Min,name:t.names.p2}),void 0!==(a=this.tempData.get(e+":"+t.names.p3))&&void 0!==a[a.length-1]&&this.probeState.set(e+":"+t.names.p3,{temp:a[a.length-1].value.toString(),date:a[a.length-1].date,alarm:Boolean(t.alarmSounding.p3H)||Boolean(t.alarmSounding.p3L),alarmHigh:t.alarms.p3H,alarmLow:t.alarms.p3L,max:t.maxmin.p3Max,min:t.maxmin.p3Min,name:t.names.p3}),void 0!==(a=this.tempData.get(e+":"+t.names.p4))&&void 0!==a[a.length-1]&&this.probeState.set(e+":"+t.names.p4,{temp:a[a.length-1].value.toString(),date:a[a.length-1].date,alarm:Boolean(t.alarmSounding.p4H)||Boolean(t.alarmSounding.p4L),alarmHigh:t.alarms.p4H,alarmLow:t.alarms.p4L,max:t.maxmin.p4Max,min:t.maxmin.p4Min,name:t.names.p4})}void 0!==this.onDataUpdate&&this.onDataUpdate()}},{key:"addSignalsTempData",value:function(e,t){var a=this,n=this.signalDevices.get(e);console.log("Signals ("+e+") Temp Data update: "+t.numChildren()),t.forEach((function(e){var t=e.toJSON(),r=new Date(0);r.setUTCSeconds(Number(t.time)),void 0!==n&&("---"!==t.p1&&a.tempData.get(n.deviceName+":"+n.probe1Name).push({date:r,value:Number(t.p1)}),"---"!==t.p2&&a.tempData.get(n.deviceName+":"+n.probe2Name).push({date:r,value:Number(t.p2)}),"---"!==t.p3&&a.tempData.get(n.deviceName+":"+n.probe3Name).push({date:r,value:Number(t.p3)}),"---"!==t.p4&&a.tempData.get(n.deviceName+":"+n.probe4Name).push({date:r,value:Number(t.p4)}))})),this.replaceSignalsProbeDetails(e)}},{key:"replaceSmokeProbeDetails",value:function(e){var t=this.smokeDeviceDetails.get(e);if(void 0!==t){var a=this.tempData.get(e+":Probe 1");void 0!==a&&void 0!==a[a.length-1]&&this.probeState.set(e+":Probe 1",{temp:a[a.length-1].value.toString(),date:a[a.length-1].date,alarm:Boolean(t.alarms.alarm1High)||Boolean(t.alarms.alarm1Low),alarmHigh:t.alarms.probe1H,alarmLow:t.alarms.probe1L,max:t.minMax.probe1Max,min:t.minMax.probe1Min,name:e}),void 0!==(a=this.tempData.get(e+":Probe 2"))&&void 0!==a[a.length-1]&&this.probeState.set(e+":Probe 2",{temp:a[a.length-1].value.toString(),date:a[a.length-1].date,alarm:Boolean(t.alarms.alarm2High)||Boolean(t.alarms.alarm2Low),alarmHigh:t.alarms.probe2H,alarmLow:t.alarms.probe2L,max:t.minMax.probe2Max,min:t.minMax.probe2Min,name:e}),void 0!==this.onDataUpdate&&this.onDataUpdate()}}},{key:"addSmokeTempData",value:function(e,t){var a=this,n=this.smokeDevices.get(e);console.log("Smoke ("+e+") Temp Data update: "+t.numChildren()),t.forEach((function(e){var t=e.toJSON(),r=new Date(0);r.setUTCSeconds(Number(t.time)),void 0!==n&&("-"!==t.probe1&&a.tempData.get(n.name+":Probe 1").push({date:r,value:Number(t.probe1)}),"-"!==t.probe2&&a.tempData.get(n.name+":Probe 2").push({date:r,value:Number(t.probe2)}))})),this.replaceSmokeProbeDetails(e)}}]),e}()),U=a(68),A=a(16),I=a(26),z=a(37),_=a(67),F=a(35),G=a.n(F),R=a(66),J=a.n(R);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var X=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={isAwknoledged:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"awknowledgeAlarm",value:function(){this.setState(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.state,{isAwknoledged:!0}))}},{key:"render",value:function(){var e=Number(this.props.probe.temp),t=Number(this.props.probe.alarmHigh),a=Number(this.props.probe.alarmLow),n="light",i="secondary",s=!1;return a<e&&e<t&&(n="light",i="secondary"),a>e&&(n="primary",i="white",s=!0),e>t&&(n="danger",i="white",s=!0),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row cardContainer"},r.a.createElement(z.a,{className:"col card",style:{cursor:"pointer"},text:i,bg:n,border:"dark",onClick:this.awknowledgeAlarm.bind(this)},r.a.createElement(z.a.Title,{style:{textAlign:"center"}},this.props.name),r.a.createElement(z.a.Body,{style:{padding:0}},r.a.createElement(_.a,{fluid:!0},r.a.createElement(A.a,{style:{padding:0}},r.a.createElement(I.a,{xs:"4",style:{padding:0}},r.a.createElement(A.a,{style:{padding:0}},r.a.createElement(I.a,null,r.a.createElement(A.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"MinAlarm"),r.a.createElement(A.a,{style:{fontSize:"large",padding:0,margin:0}},this.props.probe.alarmLow))),r.a.createElement(A.a,{style:{padding:0}},r.a.createElement(I.a,null,r.a.createElement(A.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"MaxAlarm"),r.a.createElement(A.a,{style:{fontSize:"large",padding:0,margin:0}},this.props.probe.alarmHigh)))),r.a.createElement(I.a,{xs:"4",style:{padding:0}},r.a.createElement(A.a,{style:{fontSize:"xx-large",writingMode:"vertical-lr",padding:0}},this.props.probe.temp,"\xb0")),r.a.createElement(I.a,{xs:"4",style:{padding:0}},r.a.createElement(A.a,{style:{padding:0}},r.a.createElement(I.a,null,r.a.createElement(A.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"Min"),r.a.createElement(A.a,{style:{fontSize:"large",padding:0,margin:0}},this.props.probe.min))),r.a.createElement(A.a,{style:{padding:0}},r.a.createElement(I.a,null,r.a.createElement(A.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"Max"),r.a.createElement(A.a,{style:{fontSize:"large",padding:0,margin:0}},this.props.probe.max)))))),r.a.createElement(G.a,{url:J.a,playStatus:s&&!this.state.isAwknoledged?G.a.status.PLAYING:G.a.status.STOPPED,loop:!0})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.isAwknoledged&&e.probe.alarmLow<e.probe.temp&&e.probe.temp<e.probe.alarmHigh?{isAwknoledged:!1}:null}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={curTemps:e.curTemps,probeDetails:e.probeDetails},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=[];return this.props.probeDetails.forEach((function(t,a){return e.push(r.a.createElement(X,{key:a,name:a,probe:t}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"cardDeckContainer",className:"row"},r.a.createElement(U.a,{id:"cardDeck",className:"col"},e)))}}]),t}(n.Component),K=(a(49),a(33)),Y=a.n(K),V=a(69),$=a(36),Q=a(34),Z=a.n(Q);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ae=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={tempData:[],baselines:[],markers:[]},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(this.props.location.search),e.next=3,Z()({method:"GET",url:"https://jsonblob.com/api/jsonBlob/"+t.get("id"),transformResponse:[function(e){return JSON.parse(e,(function(e,t){return"date"===e?new Date(t):t}))}]});case 3:a=e.sent,this.setState(te({},this.state,{tempData:a.data.tempData,baselines:a.data.baselines,markers:a.data.markers}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"App",style:{padding:0,margin:15},className:"row"},r.a.createElement(D.a,{href:"https://github.com/dlgreenwald/SignalsMontior",direction:"left",octoColor:"#212529",bannerColor:"grey"}),r.a.createElement("div",{id:"container",style:{marginTop:45},className:"col"},r.a.createElement("div",{id:"headerContainer",className:"row"},r.a.createElement("div",{id:"header"},"Better Thermoworks Monitor")),r.a.createElement("div",{id:"body",className:"row"},r.a.createElement("div",{id:"irbe"},r.a.createElement("div",{id:"graphContainer",className:"row"},r.a.createElement(Y.a,null,(function(t){var a=t.width;t.height;return r.a.createElement(v.a,{data:e.state.tempData,width:a,height:600,x_accessor:"date",y_accessor:"value",right:"40",area:"false",baselines:e.state.baselines,aggregate_rollover:"true",markers:e.state.markers,missing_is_hidden:"true"})}))),r.a.createElement("div",{id:"buttonContainer",className:"row"},r.a.createElement("div",{id:"buttons",className:"col"})))),r.a.createElement("div",{id:"footer",className:"row"},r.a.createElement("div",{id:"footerContainer",className:"col"}))))}}]),t}(n.Component);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={firebase:new H,tempData:[],baselines:[],curTemps:new Map,probeDetails:new Map,showLogin:!0,shareURL:"",markers:[],addingMarker:!1,selectedDate:new Date},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"onLogin",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.firebase.setCredentials(t,a),this.state.firebase.setOnTempUpdate(this.onTempUpdate.bind(this)),e.next=4,this.state.firebase.init();case 4:this.setState(re({},this.state,{showLogin:!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onTempUpdate",value:function(){var e=new Map;this.state.firebase.returnTempData().forEach((function(t,a){e.set(a,t[t.length-1])}));var t=[];this.state.firebase.returnTempData().forEach((function(e){0!==e.length&&t.push(e)}));var a=this.state.firebase.returnProbeDetails(),n=[];this.state.firebase.returnProbeDetails().forEach((function(e,t){n.push({value:Number(e.alarmHigh),label:t+" High"}),"32"!==e.alarmLow&&n.push({value:Number(e.alarmLow),label:t+" Low"})})),this.setState(re({},this.state,{tempData:t,curTemps:e,probeDetails:a,baselines:n}))}},{key:"exportXLSX",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx",(t=$.utils.book_new()).Props={Title:"ThermoWorks Temperature Log"},this.state.firebase.returnTempData().forEach((function(e,a){if(0!==e.length){var n=a.replace(":","-");t.SheetNames.push(n),t.Sheets[n]=$.utils.json_to_sheet(e)}})),a=$.write(t,{bookType:"xlsx",type:"array"}),n=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),V.saveAs(n,"Temps.xlsx");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportURL",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.post("https://jsonblob.com/api/jsonBlob",JSON.stringify({tempData:this.state.tempData,baselines:this.state.baselines,markers:this.state.markers}),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:t=e.sent,this.setState(re({},this.state,{shareURL:"https://www.dlgreen.com/SignalsMonitor?id="+t.headers["x-jsonblob"]}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onGraphClick",value:function(e){this.setState(re({},this.state,{selectedDate:e.date,addingMarker:!0}))}},{key:"saveAnnotation",value:function(e,t){this.state.markers.push({date:e,label:t}),this.setState(re({},this.state,{addingMarker:!1}))}},{key:"closeAnnotation",value:function(){this.setState(re({},this.state,{addingMarker:!1}))}},{key:"render",value:function(){var e=this;return null!==new URLSearchParams(this.props.location.search).get("id")?r.a.createElement(ae,{history:this.props.history,location:this.props.location,match:this.props.match}):r.a.createElement("div",{id:"App",style:{padding:0,margin:15},className:"row"},r.a.createElement(D.a,{href:"https://github.com/dlgreenwald/SignalsMontior",direction:"left",octoColor:"#212529",bannerColor:"grey"}),r.a.createElement("div",{id:"container",style:{marginTop:45},className:"col"},r.a.createElement("div",{id:"headerContainer",className:"row"},r.a.createElement("div",{id:"header"},"Better Thermoworks Monitor")),r.a.createElement("div",{id:"body",className:"row"},r.a.createElement("div",{id:"irbe"},r.a.createElement("div",{id:"graphContainer",className:"row"},r.a.createElement(Y.a,null,(function(t){var a=t.width;t.height;return r.a.createElement(v.a,{data:e.state.tempData,width:a,height:600,x_accessor:"date",y_accessor:"value",right:"40",area:"false",brush:"xy",baselines:e.state.baselines,aggregate_rollover:"true",click:e.onGraphClick.bind(e),markers:e.state.markers,missing_is_hidden:"true"})}))),r.a.createElement(q,{curTemps:this.state.curTemps,probeDetails:this.state.probeDetails}),r.a.createElement("div",{id:"buttonContainer",className:"row"},r.a.createElement("div",{id:"buttons",className:"col"},r.a.createElement(x,{show:this.state.showLogin,onLogin:this.onLogin.bind(this)}),r.a.createElement(y.a,{style:{width:"250px",margin:"15px"},onClick:this.exportXLSX.bind(this)},"Download *.xlsx"),r.a.createElement(N,{url:this.state.shareURL,onShare:this.exportURL.bind(this)}),r.a.createElement(M,{show:this.state.addingMarker,date:this.state.selectedDate,onSave:this.saveAnnotation.bind(this),onClose:this.closeAnnotation.bind(this)}))))),r.a.createElement("div",{id:"footer",className:"row"},r.a.createElement("div",{id:"footerContainer",className:"col"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(70),oe=a(28);s.a.render(r.a.createElement(se.a,null,r.a.createElement(oe.a,{exact:!0,path:"/SignalsMonitor/",component:ie})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},29:function(e,t,a){},49:function(e,t,a){},53:function(e,t){},66:function(e,t,a){e.exports=a.p+"static/media/beeps.927d19ee.mp3"},73:function(e,t,a){e.exports=a(130)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.ba9e5a56.chunk.js.map