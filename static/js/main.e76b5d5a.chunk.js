(this["webpackJsonpsignals-monitor"]=this["webpackJsonpsignals-monitor"]||[]).push([[0],{109:function(e,t){},110:function(e,t){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),i=a.n(s),o=(a(78),a(7)),l=a.n(o),c=a(20),m=a(21),p=a(13),h=a(14),u=a(18),d=a(17),b=a(19),g=(a(45),a(29),a(32)),f=a.n(g),v=a(10),w=a(27),y=a(11),O=a(22),E=a(30),S=a.n(E),j=a(64);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleShow=a.handleShow.bind(Object(v.a)(a)),a.handleClose=a.handleClose.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.state={show:e.show,username:"",password:"",loginSubmitted:!1},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(k({},this.state,{show:e.show}))}},{key:"handleClose",value:function(){this.setState(k({},this.state,{show:!1}))}},{key:"handleShow",value:function(){this.setState(k({},this.state,{show:!0,loginSubmitted:!1}))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(k({},this.state,Object(c.a)({},t.name,t.value)))}},{key:"handleSubmit",value:function(e){this.props.onLogin(this.state.username,this.state.password),this.setState(k({},this.state,{loginSubmitted:!0})),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{style:{width:"250px",margin:"15px"},variant:"primary",onClick:this.handleShow},"Get Started"),r.a.createElement(O.a,{show:this.state.show},r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Header,null,r.a.createElement(O.a.Title,null,"Login with Thermoworks Account"),r.a.createElement(S.a,{href:"https://github.com/dlgreenwald/SignalsMontior",direction:"right",size:"60",octoColor:"white",bannerColor:"grey"})),r.a.createElement(O.a.Body,null,r.a.createElement(y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(y.a.Label,null,"Email address"),r.a.createElement(y.a.Control,{name:"username",type:"email",value:this.state.username,placeholder:"Enter email",onChange:this.handleChange}),r.a.createElement(y.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(y.a.Group,{controlId:"formBasicPassword"},r.a.createElement(y.a.Label,null,"Password"),r.a.createElement(y.a.Control,{name:"password",type:"password",value:this.state.password,placeholder:"Password",onChange:this.handleChange}))),r.a.createElement(O.a.Footer,null,r.a.createElement(w.a,{type:"submit",variant:"primary",disabled:this.state.loginSubmitted},"Login ",this.state.loginSubmitted&&r.a.createElement(j.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}))))))}}]),t}(n.Component);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleShow=a.handleShow.bind(Object(v.a)(a)),a.handleClose=a.handleClose.bind(Object(v.a)(a)),a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.state={show:!1},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(N({},this.state))}},{key:"handleClose",value:function(){this.setState(N({},this.state,{show:!1}))}},{key:"handleShow",value:function(){this.props.onShare(),this.setState(N({},this.state,{show:!0}))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(N({},this.state,Object(c.a)({},t.name,t.value)))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{style:{width:"250px",margin:"15px"},variant:"primary",onClick:this.handleShow},"Share Graph"),r.a.createElement(O.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(O.a.Header,{closeButton:!0},r.a.createElement(O.a.Title,null,"Login with Thermoworks Account")),r.a.createElement(O.a.Body,null,r.a.createElement(y.a,null,r.a.createElement(y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(y.a.Label,null,"URL"),r.a.createElement(y.a.Control,{name:"URL",type:"email",value:this.props.url,disabled:!0}),r.a.createElement(y.a.Text,{className:"text-muted"},"Share this URL to share the current graph.  The link will be good for 150 days.")))),r.a.createElement(O.a.Footer,null,r.a.createElement(w.a,{variant:"primary",onClick:this.handleClose},"Close"))))}}]),t}(n.Component),C=a(65),T=(a(87),a(89),function(){function e(){Object(p.a)(this,e),this.fbInstance=void 0,this.username=void 0,this.password=void 0,this.uid=void 0,this.signalDevices=void 0,this.smokeDevices=void 0,this.tempData=void 0,this.probeState=void 0,this.onDataUpdate=void 0,this.fbInstance=C.initializeApp({apiKey:"AIzaSyCfCUKlG5-VPsqta-9M92XBSFLHYsbSqLk",authDomain:"smoke-cloud.firebaseapp.com",databaseURL:"https://smoke-cloud.firebaseio.com",projectId:"smoke-cloud",storageBucket:"smoke-cloud.appspot.com",messagingSenderId:"74663406178"}),this.username="",this.password="",this.uid="",this.signalDevices=new Map,this.smokeDevices=new Map,this.tempData=new Map,this.onDataUpdate=void 0,this.probeState=new Map}return Object(h.a)(e,[{key:"setCredentials",value:function(e,t){this.username=e,this.password=t}},{key:"init",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.uid="",this.signalDevices=new Map,e.next=4,this.fbInstance.auth().signInWithEmailAndPassword(this.username,this.password).catch((function(e){var t=e.code,a=e.message;"auth/wrong-password"===t?alert("Wrong password."):alert(a),console.log(e)}));case 4:return this.uid=this.fbInstance.auth().currentUser.uid,e.next=7,this.fbInstance.database().ref().child("users").child(this.uid).child("devices").child("signals").once("value");case 7:return e.sent.forEach((function(e){var a=e.toJSON();t.signalDevices.set(a.deviceName,a),t.tempData.set(a.deviceName+":"+a.probe1Name,[]),t.tempData.set(a.deviceName+":"+a.probe2Name,[]),t.tempData.set(a.deviceName+":"+a.probe3Name,[]),t.tempData.set(a.deviceName+":"+a.probe4Name,[]),t.signalsStart(a)})),e.next=11,this.fbInstance.database().ref().child("users").child(this.uid).child("devices").child("smoke").once("value");case 11:e.sent.forEach((function(e){var a=e.toJSON();t.smokeDevices.set(a.name,a),t.tempData.set(a.name+":Probe 1",[]),t.tempData.set(a.name+":Probe 2",[]),t.smokeStart(a)}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"returnTempData",value:function(){return this.tempData}},{key:"returnProbeDetails",value:function(){return this.probeState}},{key:"setOnTempUpdate",value:function(e){this.onDataUpdate=e}},{key:"signalsStart",value:function(e){var t=this;this.fbInstance.database().ref().child("SignalTemps").child(e.deviceID).limitToLast(300).on("value",(function(a){return t.addSignalsTempData(e.deviceName,a)}))}},{key:"smokeStart",value:function(e){var t=this;this.fbInstance.database().ref().child("smokeTemp").child(e.device).limitToLast(300).on("value",(function(a){return t.addSmokeTempData(e.name,a)}))}},{key:"replaceSignalsProbeDetails",value:function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.signalDevices.get(t),n="",void 0!==a&&(n=a.deviceID),e.next=5,this.fbInstance.database().ref().child("signals").child(n).limitToLast(20).once("value");case 5:r=e.sent,s=r.toJSON(),void 0!==(i=this.tempData.get(t+":"+s.names.p1))&&void 0!==i[i.length-1]&&this.probeState.set(t+":"+s.names.p1,{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarmSounding.p1H)||Boolean(s.alarmSounding.p1L),alarmHigh:s.alarms.p1H,alarmLow:s.alarms.p1L,max:s.maxmin.p1Max,min:s.maxmin.p1Min,name:s.names.p1}),void 0!==(i=this.tempData.get(t+":"+s.names.p2))&&void 0!==i[i.length-1]&&this.probeState.set(t+":"+s.names.p2,{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarmSounding.p2H)||Boolean(s.alarmSounding.p2L),alarmHigh:s.alarms.p2H,alarmLow:s.alarms.p2L,max:s.maxmin.p2Max,min:s.maxmin.p2Min,name:s.names.p2}),void 0!==(i=this.tempData.get(t+":"+s.names.p3))&&void 0!==i[i.length-1]&&this.probeState.set(t+":"+s.names.p3,{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarmSounding.p3H)||Boolean(s.alarmSounding.p3L),alarmHigh:s.alarms.p3H,alarmLow:s.alarms.p3L,max:s.maxmin.p3Max,min:s.maxmin.p3Min,name:s.names.p3}),void 0!==(i=this.tempData.get(t+":"+s.names.p4))&&void 0!==i[i.length-1]&&this.probeState.set(t+":"+s.names.p4,{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarmSounding.p4H)||Boolean(s.alarmSounding.p4L),alarmHigh:s.alarms.p4H,alarmLow:s.alarms.p4L,max:s.maxmin.p4Max,min:s.maxmin.p4Min,name:s.names.p4});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addSignalsTempData",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.signalDevices.get(t),a.forEach((function(e){var t=e.toJSON(),a=new Date(0);a.setUTCSeconds(Number(t.time)),void 0!==n&&("---"!==t.p1&&r.tempData.get(n.deviceName+":"+n.probe1Name).push({date:a,value:Number(t.p1)}),"---"!==t.p2&&r.tempData.get(n.deviceName+":"+n.probe2Name).push({date:a,value:Number(t.p2)}),"---"!==t.p3&&r.tempData.get(n.deviceName+":"+n.probe3Name).push({date:a,value:Number(t.p3)}),"---"!==t.p4&&r.tempData.get(n.deviceName+":"+n.probe4Name).push({date:a,value:Number(t.p4)}))})),e.next=4,this.replaceSignalsProbeDetails(t);case 4:void 0!==this.onDataUpdate&&this.onDataUpdate();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"replaceSmokeProbeDetails",value:function(){var e=Object(m.a)(l.a.mark((function e(t){var a,n,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.smokeDevices.get(t),n="",void 0!==a&&(n=a.device),e.next=5,this.fbInstance.database().ref().child("smoke").child(n).limitToLast(20).once("value");case 5:r=e.sent,s=r.toJSON(),void 0!==(i=this.tempData.get(t+":Probe 1"))&&void 0!==i[i.length-1]&&this.probeState.set(t+":Probe 1",{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarms.alarm1High)||Boolean(s.alarms.alarm1Low),alarmHigh:s.alarms.probe1H,alarmLow:s.alarms.probe1L,max:s.minMax.probe1Max,min:s.minMax.probe1Min,name:t}),void 0!==(i=this.tempData.get(t+":Probe 2"))&&void 0!==i[i.length-1]&&this.probeState.set(t+":Probe 2",{temp:i[i.length-1].value.toString(),date:i[i.length-1].date,alarm:Boolean(s.alarms.alarm2High)||Boolean(s.alarms.alarm2Low),alarmHigh:s.alarms.probe2H,alarmLow:s.alarms.probe2L,max:s.minMax.probe2Max,min:s.minMax.probe2Min,name:t});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addSmokeTempData",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){var n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.smokeDevices.get(t),a.forEach((function(e){var t=e.toJSON(),a=new Date(0);a.setUTCSeconds(Number(t.time)),void 0!==n&&("-"!==t.probe1&&r.tempData.get(n.name+":Probe 1").push({date:a,value:Number(t.probe1)}),"-"!==t.probe2&&r.tempData.get(n.name+":Probe 2").push({date:a,value:Number(t.probe2)}))})),e.next=4,this.replaceSmokeProbeDetails(t);case 4:void 0!==this.onDataUpdate&&this.onDataUpdate();case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),M=a(68),B=a(12),U=a(25),H=a(37),A=a(67),I=a(35),R=a.n(I),z=a(66),J=a.n(z);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={isAlarming:!1,isAwknoledged:!1,probe:e.probe,name:e.name,background:"light",text:"secondary"},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=Number(e.probe.temp),a=Number(e.probe.alarmHigh),n=Number(e.probe.alarmLow),r="light",s="secondary",i=!1,o=this.state.isAwknoledged;n<t&&t<a&&(r="light",s="secondary",o=!1),n>t&&(r="primary",s="white",i=!0),t>a&&(r="danger",s="white",i=!0),console.log("Temp Details(Low:"+n+", Temp:"+t+",  High:"+a+")"),console.log("Alarm State: "+i+" IsAwknowledged:"+o),this.setState(F({},this.state,{name:e.name,probe:e.probe,background:r,text:s,isAlarming:i,isAwknoledged:o}))}},{key:"awknowledgeAlarm",value:function(){this.setState(F({},this.state,{isAwknoledged:!0}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row cardContainer"},r.a.createElement(H.a,{className:"col card",style:{cursor:"pointer"},text:this.state.text,bg:this.state.background,border:"dark",onClick:this.awknowledgeAlarm.bind(this)},r.a.createElement(H.a.Title,{style:{textAlign:"center"}},this.state.name),r.a.createElement(H.a.Body,{style:{padding:0}},r.a.createElement(A.a,{fluid:!0},r.a.createElement(B.a,{style:{padding:0}},r.a.createElement(U.a,{xs:"4",style:{padding:0}},r.a.createElement(B.a,{style:{padding:0}},r.a.createElement(U.a,null,r.a.createElement(B.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"MinAlarm"),r.a.createElement(B.a,{style:{fontSize:"large",padding:0,margin:0}},this.state.probe.alarmLow))),r.a.createElement(B.a,{style:{padding:0}},r.a.createElement(U.a,null,r.a.createElement(B.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"MaxAlarm"),r.a.createElement(B.a,{style:{fontSize:"large",padding:0,margin:0}},this.state.probe.alarmHigh)))),r.a.createElement(U.a,{xs:"4",style:{padding:0}},r.a.createElement(B.a,{style:{fontSize:"xx-large",writingMode:"vertical-lr",padding:0}},this.state.probe.temp,"\xb0")),r.a.createElement(U.a,{xs:"4",style:{padding:0}},r.a.createElement(B.a,{style:{padding:0}},r.a.createElement(U.a,null,r.a.createElement(B.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"Min"),r.a.createElement(B.a,{style:{fontSize:"large",padding:0,margin:0}},this.state.probe.min))),r.a.createElement(B.a,{style:{padding:0}},r.a.createElement(U.a,null,r.a.createElement(B.a,{style:{fontSize:"xx-small",padding:0,margin:0}},"Max"),r.a.createElement(B.a,{style:{fontSize:"large",padding:0,margin:0}},this.state.probe.max)))))),r.a.createElement(R.a,{url:J.a,playStatus:this.state.isAlarming&&!this.state.isAwknoledged?R.a.status.PLAYING:R.a.status.STOPPED,loop:!0})))))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={curTemps:e.curTemps,probeDetails:e.probeDetails},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({curTemps:e.curTemps,probeDetails:e.probeDetails})}},{key:"render",value:function(){var e=[];return this.state.probeDetails.forEach((function(t,a){return e.push(r.a.createElement(G,{name:a,probe:t}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"cardDeckContainer",className:"row"},r.a.createElement(M.a,{id:"cardDeck",className:"col"},e)))}}]),t}(n.Component),X=(a(49),a(33)),q=a.n(X),K=a(69),Y=a(36),V=a(34),$=a.n(V);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={tempData:[],baselines:[]},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(this.props.location.search),e.next=3,$()({method:"GET",url:"https://jsonblob.com/api/jsonBlob/"+t.get("id"),transformResponse:[function(e){return JSON.parse(e,(function(e,t){return"date"===e?new Date(t):t}))}]});case 3:a=e.sent,this.setState(Z({},this.state,{tempData:a.data.tempData,baselines:a.data.baselines}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"App",style:{padding:0,margin:15},className:"row"},r.a.createElement(S.a,{href:"https://github.com/dlgreenwald/SignalsMontior",direction:"left",octoColor:"#212529",bannerColor:"grey"}),r.a.createElement("div",{id:"container",style:{marginTop:45},className:"col"},r.a.createElement("div",{id:"headerContainer",className:"row"},r.a.createElement("div",{id:"header"},"Better Thermoworks Monitor")),r.a.createElement("div",{id:"body",className:"row"},r.a.createElement("div",{id:"irbe"},r.a.createElement("div",{id:"graphContainer",className:"row"},r.a.createElement(q.a,null,(function(t){var a=t.width;t.height;return r.a.createElement(f.a,{data:e.state.tempData,width:a,height:600,x_accessor:"date",y_accessor:"value",right:"40",area:"false",baselines:e.state.baselines})}))),r.a.createElement("div",{id:"buttonContainer",className:"row"},r.a.createElement("div",{id:"buttons",className:"col"})))),r.a.createElement("div",{id:"footer",className:"row"},r.a.createElement("div",{id:"footerContainer",className:"col"}))))}}]),t}(n.Component);function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={firebase:new T,tempData:[],baselines:[],curTemps:new Map,probeDetails:new Map,showLogin:!0,shareURL:""},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"onLogin",value:function(){var e=Object(m.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.firebase.setCredentials(t,a),this.state.firebase.setOnTempUpdate(this.onTempUpdate.bind(this)),e.next=4,this.state.firebase.init();case 4:this.setState(ae({},this.state,{showLogin:!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"onTempUpdate",value:function(){var e=new Map;this.state.firebase.returnTempData().forEach((function(t,a){e.set(a,t[t.length-1])}));var t=[];this.state.firebase.returnTempData().forEach((function(e){0!==e.length&&t.push(e)}));var a=this.state.firebase.returnProbeDetails(),n=[];this.state.firebase.returnProbeDetails().forEach((function(e,t){n.push({value:Number(e.alarmHigh),label:t+" High"}),"32"!==e.alarmLow&&n.push({value:Number(e.alarmLow),label:t+" Low"})})),this.setState(ae({},this.state,{tempData:t,curTemps:e,probeDetails:a,baselines:n}))}},{key:"exportXLSX",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",".xlsx",(t=Y.utils.book_new()).Props={Title:"ThermoWorks Temperature Log"},this.state.firebase.returnTempData().forEach((function(e,a){if(0!==e.length){var n=a.replace(":","-");t.SheetNames.push(n),t.Sheets[n]=Y.utils.json_to_sheet(e)}})),a=Y.write(t,{bookType:"xlsx",type:"array"}),n=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),K.saveAs(n,"Temps.xlsx");case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exportURL",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("https://jsonblob.com/api/jsonBlob",JSON.stringify({tempData:this.state.tempData,baselines:this.state.baselines}),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:t=e.sent,this.setState(ae({},this.state,{shareURL:"https://www.dlgreen.com/SignalsMonitor?id="+t.headers["x-jsonblob"]})),console.log(t.headers["x-jsonblob"]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return null!==new URLSearchParams(this.props.location.search).get("id")?r.a.createElement(ee,{history:this.props.history,location:this.props.location,match:this.props.match}):r.a.createElement("div",{id:"App",style:{padding:0,margin:15},className:"row"},r.a.createElement(S.a,{href:"https://github.com/dlgreenwald/SignalsMontior",direction:"left",octoColor:"#212529",bannerColor:"grey"}),r.a.createElement("div",{id:"container",style:{marginTop:45},className:"col"},r.a.createElement("div",{id:"headerContainer",className:"row"},r.a.createElement("div",{id:"header"},"Better Thermoworks Monitor")),r.a.createElement("div",{id:"body",className:"row"},r.a.createElement("div",{id:"irbe"},r.a.createElement("div",{id:"graphContainer",className:"row"},r.a.createElement(q.a,null,(function(t){var a=t.width;t.height;return r.a.createElement(f.a,{data:e.state.tempData,width:a,height:600,x_accessor:"date",y_accessor:"value",right:"40",area:"false",brush:"xy",baselines:e.state.baselines})}))),r.a.createElement(_,{curTemps:this.state.curTemps,probeDetails:this.state.probeDetails}),r.a.createElement("div",{id:"buttonContainer",className:"row"},r.a.createElement("div",{id:"buttons",className:"col"},r.a.createElement(x,{show:this.state.showLogin,onLogin:this.onLogin.bind(this)}),r.a.createElement(w.a,{style:{width:"250px",margin:"15px"},onClick:this.exportXLSX.bind(this)},"Download *.xlsx"),r.a.createElement(L,{url:this.state.shareURL,onShare:this.exportURL.bind(this)}))))),r.a.createElement("div",{id:"footer",className:"row"},r.a.createElement("div",{id:"footerContainer",className:"col"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=a(70),se=a(28);i.a.render(r.a.createElement(re.a,null,r.a.createElement(se.a,{exact:!0,path:"/SignalsMonitor/",component:ne})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},29:function(e,t,a){},49:function(e,t,a){},53:function(e,t){},66:function(e,t,a){e.exports=a.p+"static/media/beeps.927d19ee.mp3"},73:function(e,t,a){e.exports=a(130)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.e76b5d5a.chunk.js.map